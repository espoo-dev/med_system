name: Build and Publish Release

on:
  push:
    branches:
      - main # ou qualquer outro branch que você deseje

jobs:
  build-and-publish:
    runs-on: ubuntu-latest
    name: Builds - build Flutter APK and create github release
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Build and Publish APK
        uses: Dank-del/flutter-build-and-publish-action@v1
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }} # Token do GitHub para permitir o acesso ao repositório
          apk_path: med_system_app/build/app/outputs/flutter-apk/app-release.apk # Caminho para o APK gerado
          release_name: v1.0.0 # Nome do lançamento do GitHub
          release_tag: v1.0.0 # Tag do lançamento do GitHub
